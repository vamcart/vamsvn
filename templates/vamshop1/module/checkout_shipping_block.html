<script>
{literal}
$(document).ready(function() {
$(".shipping-method").on("click",function(){
$(".shipping-method").parent().removeClass("selected");
$(this).parent().addClass("selected");
});
});
{/literal}
</script>
{if $FREE_SHIPPING} <p>
<span class="bold">{$FREE_SHIPPING_TITLE}</span>&nbsp;{$FREE_SHIPPING_ICON}</span>
</p>
<p>
{$FREE_SHIPPING_DESCRIPTION}
</p>
{else} 
{foreach name=aussen item=module_data from=$module_content}

{foreach name=aussen item=method_data from=$module_data.methods} <label class="shipping {$method_data.id}{if {$method_data.checked} == 1} selected{/if}" for="{$method_data.id}">
<div class="shipping-method {cycle values="itemOdd,itemEven"}">   
<p>
{$method_data.radio_field}&nbsp;{$module_data.icon} <span class="bold">{$module_data.module}</span>
{$method_data.title}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$method_data.price}
</p>

{if $module_data.error != ''}<p>
{$module_data.error}
</p>{/if} 

{if $method_data.id == "pickpoint"}

<script type="text/javascript" src="https://www.pickpoint.ru/select/postamat.js"></script>

<script type="text/javascript">
function pickpoint_call(id_this){
  PickPoint.open(pickpoint_callback_function, pickpoint_options);
}
function pickpoint_callback_function(result){
  var pickpoint_id = document.getElementById("pickpoint_id");
  var pickpoint_address = document.getElementById("pickpoint_address");
  var to_pickpoint_id = document.getElementById("to_pickpoint_id");
  var to_pickpoint_address = document.getElementById("to_pickpoint_address");
  var pickpoint_address_text = document.getElementById("pickpoint_address_text");
  var pickpoint_link = document.getElementById("pickpoint_link");
  var pickpoint_error = document.getElementById("pickpoint_error");
  var pickpoint_link_help = document.getElementById("pickpoint_link_help");
  pickpoint_id.value = result["id"];
  pickpoint_address.value = result["address"];
  
  document.getElementById("street_address").value=result["name"]+", "+result["address"];

  document.getElementById("pickpoint").checked="checked";
  
  to_pickpoint_id.value = result["id"];
  to_pickpoint_address.value = result["address"];
  // textContent innerHTML

  pickpoint_address_text.innerHTML = "{$smarty.const.MODULE_SHIPPING_PICKPOINT_TEXT_ADDRESS}" + result["address"] + " ";
  pickpoint_link.innerHTML = "{$smarty.const.MODULE_SHIPPING_PICKPOINT_TEXT_ANOTHER_ADDRESS}";

  if (pickpoint_error) pickpoint_error.innerHTML="";
//  if (pickpoint_link_help) pickpoint_link_help.innerHTML="";
}
var pickpoint_options={};

</script>
<input type="hidden" name="pickpoint_id" id="pickpoint_id" value="" />
<input type="hidden" name="pickpoint_address" id="pickpoint_address" value="" />
<span id="pickpoint_address_text"></span>
<u><a href="" onclick="pickpoint_call(this);return false;"><span id="pickpoint_link" style="color:blue;">{$smarty.const.MODULE_SHIPPING_PICKPOINT_TEXT_SELECT_ADDRESS}</span></a></u> <span id="pickpoint_link_help">{$smarty.const.MODULE_SHIPPING_PICKPOINT_TEXT_ADDRESS_HELP}</span>

{/if}

</div>
</label> {/foreach}
{/foreach}
{/if}